import{r as h,u as C,j as e,H as E,L as u}from"./app-BLmmBcay.js";import{B as n}from"./button-CbmVRWdR.js";import{I as o,E as p}from"./index-DlIj8nat.js";import{L as t,E as j,C as S}from"./checkbox-L3QjkSGu.js";import{S as _,a as U,b as L,c as F,d as z}from"./select-Cgq5gulh.js";import{s as m,a as I}from"./sweetAlert-DJK8XZI4.js";import{A as P,U as g}from"./user-PZR8amDH.js";import{L as $}from"./lock-Dyp92RwK.js";import{S as k}from"./shield-CFsey6sx.js";/* empty css            */import"./createLucideIcon-CDteFaz_.js";import"./index-WrNgcHNP.js";import"./index-CNLLUrwG.js";import"./Combination-QlzZ0nwj.js";import"./chevron-down-CpcA5Y-T.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";function Y({user:i,roles:N}){const[c,f]=h.useState(!1),[d,v]=h.useState(!1),{data:r,setData:l,patch:b,processing:x,errors:a}=C({name:i.name,username:i.username||"",email:i.email,password:"",password_confirmation:"",role:i.role,is_active:i.is_active}),y=s=>{l("role",s)},w=s=>{if(s.preventDefault(),!r.name||!r.email||!r.role){m("Campos requeridos","Por favor complete todos los campos obligatorios.");return}if(r.password&&r.password!==r.password_confirmation){m("Error de validación","Las contraseñas no coinciden.");return}b(`/admin/users/${i.id}`,{onSuccess:()=>{I("Usuario actualizado","El usuario ha sido actualizado exitosamente.")},onError:()=>{m("Error","No se pudo actualizar el usuario. Verifique los datos ingresados.")}})};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(E,{title:`Editar Usuario: ${i.name} - Tableros de Gestión HUV`}),e.jsx("div",{className:"bg-[#2a3d85] text-white p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{href:"/admin/users",className:"mr-4",children:e.jsxs(n,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Volver a Usuarios"]})}),e.jsx(g,{className:"w-8 h-8 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Editar Usuario"}),e.jsxs("p",{className:"opacity-90",children:["Modificar información de ",i.name]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:"Hospital Universitario del Valle"}),e.jsx("p",{className:"text-xs opacity-90",children:'"Evaristo Garcia" E.S.E'})]})]})})}),e.jsx("div",{className:"max-w-3xl mx-auto p-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(g,{className:"w-5 h-5 mr-2 text-[#2a3d85]"}),"Información Personal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",className:"text-gray-700 font-medium",children:"Nombre Completo *"}),e.jsx(o,{id:"name",type:"text",value:r.name,onChange:s=>l("name",s.target.value),placeholder:"Ej: Juan Pérez García",className:`h-12 ${a.name?"border-red-500":"border-gray-300"} focus:border-[#2a3d85] focus:ring-[#2a3d85]`,required:!0}),a.name&&e.jsx("p",{className:"text-sm text-red-600",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"username",className:"text-gray-700 font-medium",children:"Nombre de Usuario"}),e.jsx(o,{id:"username",type:"text",value:r.username,onChange:s=>l("username",s.target.value),placeholder:"Ej: juan.perez (opcional)",className:`h-12 ${a.username?"border-red-500":"border-gray-300"} focus:border-[#2a3d85] focus:ring-[#2a3d85]`}),a.username&&e.jsx("p",{className:"text-sm text-red-600",children:a.username}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solo letras, números, puntos, guiones y guiones bajos"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",className:"text-gray-700 font-medium",children:"Correo Electrónico *"}),e.jsx(o,{id:"email",type:"email",value:r.email,onChange:s=>l("email",s.target.value),placeholder:"usuario@huv.com",className:`h-12 ${a.email?"border-red-500":"border-gray-300"} focus:border-[#2a3d85] focus:ring-[#2a3d85]`,required:!0}),a.email&&e.jsx("p",{className:"text-sm text-red-600",children:a.email})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-2 text-[#2a3d85]"}),"Cambiar Contraseña",e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-2",children:"(Opcional)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"password",className:"text-gray-700 font-medium",children:"Nueva Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{id:"password",type:c?"text":"password",value:r.password,onChange:s=>l("password",s.target.value),placeholder:"Dejar vacío para mantener actual",className:`h-12 pr-12 ${a.password?"border-red-500":"border-gray-300"} focus:border-[#2a3d85] focus:ring-[#2a3d85]`,minLength:8}),e.jsx("button",{type:"button",onClick:()=>f(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?e.jsx(j,{className:"w-5 h-5"}):e.jsx(p,{className:"w-5 h-5"})})]}),a.password&&e.jsx("p",{className:"text-sm text-red-600",children:a.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"password_confirmation",className:"text-gray-700 font-medium",children:"Confirmar Nueva Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{id:"password_confirmation",type:d?"text":"password",value:r.password_confirmation,onChange:s=>l("password_confirmation",s.target.value),placeholder:"Repetir nueva contraseña",className:`h-12 pr-12 ${a.password_confirmation?"border-red-500":"border-gray-300"} focus:border-[#2a3d85] focus:ring-[#2a3d85]`}),e.jsx("button",{type:"button",onClick:()=>v(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?e.jsx(j,{className:"w-5 h-5"}):e.jsx(p,{className:"w-5 h-5"})})]}),a.password_confirmation&&e.jsx("p",{className:"text-sm text-red-600",children:a.password_confirmation})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2 text-[#2a3d85]"}),"Permisos y Configuración"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"role",className:"text-gray-700 font-medium",children:"Rol del Usuario *"}),e.jsxs(_,{value:r.role,onValueChange:y,children:[e.jsx(U,{className:`h-12 ${a.role?"border-red-500":"border-gray-300"}`,children:e.jsx(L,{placeholder:"Seleccionar rol"})}),e.jsx(F,{children:N.map(s=>e.jsx(z,{value:s,children:s},s))})]}),a.role&&e.jsx("p",{className:"text-sm text-red-600",children:a.role})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-gray-700 font-medium",children:"Estado del Usuario"}),e.jsxs("div",{className:"flex items-center space-x-2 h-12",children:[e.jsx(S,{id:"is_active",checked:r.is_active,onCheckedChange:s=>l("is_active",s)}),e.jsx(t,{htmlFor:"is_active",className:"text-sm text-gray-600",children:"Usuario activo (puede acceder al sistema)"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Información del Usuario:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"ID:"})," #",i.id]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Fecha de Creación:"})," ",new Date(i.created_at).toLocaleDateString("es-ES")]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Información Importante:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Deje los campos de contraseña vacíos para mantener la contraseña actual"}),e.jsx("li",{children:"• Si cambia la contraseña, debe tener al menos 8 caracteres"}),e.jsx("li",{children:"• El nombre de usuario es opcional y debe ser único"}),e.jsx("li",{children:"• El usuario puede iniciar sesión con email o nombre de usuario"}),e.jsx("li",{children:"• Solo los usuarios activos pueden acceder al sistema"}),e.jsx("li",{children:"• El cambio de rol determinará los permisos del usuario"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx(u,{href:"/admin/users",children:e.jsx(n,{type:"button",variant:"outline",className:"px-6",children:"Cancelar"})}),e.jsx(n,{type:"submit",disabled:x,className:"px-6 bg-[#2a3d85] hover:bg-[#1e2d5f]",children:x?"Actualizando...":"Actualizar Usuario"})]})]})})})]})}export{Y as default};
